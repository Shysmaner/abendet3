import{r as t,j as e,g as V,c as _,R as G}from"./country-D3IyiI93.js";/* empty css                  *//* empty css                       *//* empty css              *//* empty css                */import{g as I}from"./index-454a0f5f-BXqj5mO1.js";import{a as P,d as K,e as J,g as Q,u as W}from"./firebase-CbjSvAAB.js";import{c as X,a as Y}from"./cookies-DJwG0iie.js";import{l as Z,g as ee,a as se,b as te,c as ae}from"./getInfo-Dm2TK5zu.js";const oe=({howMany:x,setHowMany:d})=>{const[v,N]=t.useState(!0),b=t.useRef(null),C=t.useRef(null),j=t.useRef(null),k=t.useRef(null);let[R,S]=t.useState(X());t.useEffect(()=>{V().then(u=>{if(u!="Mexico"){let c=document.body;c.innerHTML="",c.innerHTML="Página no disponible"}});const n=I(P).onAuthStateChanged(u=>{N(!u)}),p=u=>{if(u.key==="Enter"){const c=document.querySelector(".search-icon");c==null||c.click()}};return window.addEventListener("keypress",p),()=>{n(),window.removeEventListener("keypress",p)}},[]);const m=o=>{window.location.href=o},f=()=>{const o=document.querySelector(".search");o==null||o.classList.toggle("search-appear")};function w(){const o=j.current,n=k.current;o.classList.toggle("rotation"),n.classList.add("shaking2"),setTimeout(()=>{n.classList.toggle("shaking1"),setTimeout(()=>{n.classList.toggle("shaking2")},200),setTimeout(()=>{n.classList.toggle("visibility")},200)},200)}function y(){Y(),S=!0,window.location.href=""}return e.jsxs("section",{className:"top",children:[e.jsx("i",{className:"fa-solid fa-chevron-right",onClick:w,ref:j}),e.jsxs("div",{className:"mobile-content",ref:k,children:[e.jsx("a",{href:"../products/index.html",children:"PRODUCTOS"}),e.jsx("a",{href:"../about-us/index.html",children:"ACERCA DE"}),e.jsx("a",{href:"../contact-us/index.html",children:"CONTACTO"})]}),e.jsx("a",{href:"../",children:e.jsx("img",{src:"../../src/assets/brand.png",className:"brand",alt:"brand"})}),e.jsxs("div",{className:"top-sections",children:[e.jsx("button",{onClick:()=>m("../products/index.html"),className:"products btns",children:"PRODUCTOS"}),e.jsx("button",{onClick:()=>m("../about-us/index.html"),className:"about-us btns",children:"ACERCA DE"}),e.jsx("button",{onClick:()=>m("../contact-us/index.html"),className:"contact-us btns",children:"CONTACTO"})]}),e.jsxs("div",{className:"look-up",children:[v?e.jsx("button",{className:"log-btn",onClick:()=>m("../../"),children:"Iniciar Sesión"}):e.jsx(e.Fragment,{}),x&&e.jsxs("div",{className:"how-many",children:[e.jsx("i",{className:"fa-solid fa-xmark close",onClick:()=>d(!1)}),"Cantidad: ",e.jsx("br",{}),e.jsx("input",{type:"number",className:"amount",ref:b,defaultValue:1}),e.jsx("br",{}),e.jsx("button",{className:"add",ref:C,children:"Agregar"})]}),e.jsx("div",{className:"search-div",children:e.jsx("i",{className:"fa-solid fa-magnifying-glass top-search",onClick:f})})]}),!R&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cookies-advice activo",id:"cookies-advice",children:[e.jsx("img",{className:"cookie",src:"../../src/assets/cookie.svg",alt:"Cookie"}),e.jsx("h3",{className:"tittle",children:"Cookies"}),e.jsx("p",{className:"paragraph",children:"Utilizamos cookies propias y de terceros para mejorar nuestros servicios."}),e.jsx("button",{className:"button",id:"accept-cookies-btn",onClick:y,children:"De acuerdo"}),e.jsx("a",{className:"link",href:"abendet-cookies/index.html",children:"Aviso de Cookies"})]}),e.jsx("div",{className:"back-cookies-advice activo",id:"back-cookies-advice"})]}),e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"footer-div1",children:[e.jsx("a",{href:"../products/index.html",children:"Productos"}),e.jsx("a",{href:"../about-us/index.html",children:"Acerca De"}),e.jsx("a",{href:"../contact-us/index.html",children:"Contacto"})]}),e.jsxs("div",{className:"footer-div2",children:[e.jsx("a",{href:"../sponsorships/index.html",children:"Patrocinios"}),e.jsx("a",{href:"../abendet-cookies/index.html",children:"Cookies"}),e.jsx("a",{href:"../abendet-privacy/index.html",children:"Privacidad"})]})]})]})},ce=({setHowMany:x})=>{const d=t.useRef(null),[v,N]=t.useState(!1),b=I(P),[C,j]=t.useState(""),[k,R]=t.useState(""),[S,m]=t.useState(""),[f,w]=t.useState(""),[y,o]=t.useState(!1),[n,p]=t.useState(!1),[u,c]=t.useState(0),[E,re]=t.useState(0),[D,L]=t.useState(null);t.useEffect(()=>{const s="1";(async()=>{const h=await ee(s),g=await se(s),l=await te(s),A=await ae(s);j(h),R(g),m(l),w(A)})();const a=I(P).onAuthStateChanged(async h=>{if(h){L(h.uid);const g=await Z(h.uid,f);o(g)}});return()=>a()},[f]);const T=()=>{const s=d.current;s.value!==""?(localStorage.setItem("input-value",s.value),window.location.href="../search/index.html"):s.placeholder="Introduzca una búsqueda válida"},M=()=>{b.currentUser==null?(N(!0),window.scrollTo({top:0,behavior:"smooth"})):(localStorage.setItem("productName",f),window.location.href="../products/index.html")},U=()=>{window.location.href="../../../"},O=s=>{c(s)},H=()=>{c(0)},F=async s=>{const r=D,i=K(J,"products","1");try{const a=await Q(i);if(a.exists()){const l=(a.data().rating||[]).filter(A=>A.userId!==r);l.push({userId:r,rating:s}),await W(i,{rating:l}),console.log("Calificación actualizada:",l),p(!1)}else console.log("El producto no existe.")}catch(a){console.error("Error al actualizar la calificación:",a)}},q=s=>{if(!s||s.length===0)return 0;const r=s.split(", "),i=r.length;let a=0;return r.forEach(g=>{const l=parseFloat(g.split(": ")[1]);isNaN(l)||(a+=l)}),(a/i).toFixed(2)},z=s=>{const r=Math.round(s),i=[];for(let a=1;a<=5;a++)i.push(e.jsx("i",{className:`fa-star average-stars ${a<=r?"fa-solid":"fa-regular"}`},a));return i},B=q(k),$=z(B);return e.jsxs("div",{children:[e.jsxs("section",{className:"search",children:[e.jsx("h1",{children:"Estamos contentos de ayudarte"}),e.jsx("input",{className:"search-input",ref:d}),e.jsx("i",{className:"fa-solid fa-magnifying-glass search-icon",onClick:T})]}),e.jsx("h2",{children:f}),e.jsxs("div",{className:"content",children:[e.jsxs("p",{className:"rating",children:["Calificación: ",$]}),y&&e.jsx("button",{className:"rate-product-btn",onClick:()=>p(!0),children:"Calificar Producto"}),n&&e.jsxs("div",{className:"rate-product-div",children:[e.jsx("i",{className:"fa-solid fa-xmark close-rating-div",onClick:()=>p(!1)}),[1,2,3,4,5].map(s=>e.jsx("i",{className:`fa-star rate-stars ${s<=(u||E)?"fa-solid":"fa-regular"}`,onMouseEnter:()=>O(s),onMouseLeave:H,onClick:()=>F(s)},s))]}),e.jsx("img",{src:S,alt:"Shampoo"}),e.jsxs("p",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:C}}),e.jsxs("button",{onClick:M,children:["Comprar Producto ",e.jsx("i",{className:"fa-solid fa-up-right-from-square"})]})]}),v&&e.jsxs("div",{className:"not-user",children:[e.jsx("p",{children:"Inicia sesión para poder añadir productos al carrito"}),e.jsx("button",{onClick:U,children:"Iniciar Sesión"})]})]})]})},ne=()=>{const[x,d]=t.useState(!1);return e.jsxs("div",{children:[e.jsx(oe,{howMany:x,setHowMany:d}),e.jsx(ce,{setHowMany:d})]})};_.createRoot(document.getElementById("root")).render(e.jsx(G.StrictMode,{children:e.jsx(ne,{})}));
