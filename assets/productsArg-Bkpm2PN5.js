var te=Object.defineProperty;var ae=(k,y,t)=>y in k?te(k,y,{enumerable:!0,configurable:!0,writable:!0,value:t}):k[y]=t;var n=(k,y,t)=>ae(k,typeof y!="symbol"?y+"":y,t);import{R as S,g as oe,j as s,c as re}from"./country-D3IyiI93.js";/* empty css                  *//* empty css                       */import{c as ne,a as ie}from"./cookies-DJwG0iie.js";import{g as ce,o as le}from"./index-454a0f5f-BXqj5mO1.js";import{b,c as D,e as p,g as A,d as j,s as N,q as E,w as L,f as de,a as he}from"./firebase-CbjSvAAB.js";import{g as F,E as B,P as ue,a as me,m as O}from"./municipios-C7poyu9L.js";/* empty css                       */const P=ce(he);let pe="iM=${m6P";class ge extends S.Component{constructor(t){super(t);n(this,"verifyProductToBuy",async()=>{const t=localStorage.getItem("productName");if(t)console.log("Producto en localStorage: "+t);else{console.log("No se encontró 'productoName' en localStorage");return}const{productsDB:a}=this.state;if(console.log("Productos en productsDB:",a),Array.isArray(a)&&a.length>0){const o=a.find(r=>r.name===t);if(o){console.log("Producto encontrado: ",o.name);const r=document.querySelector(`.product-item[data-id='${o.id}'] .save`);r?(console.log("Clic en guardar activado para el producto: "+o.name),r.click(),localStorage.removeItem("productName"),console.log("'productName' eliminado de localStorage")):console.log("No se encontró el ícono de guardar para el producto: "+o.name)}else console.log("No se encontró el producto en la base de datos: "+t)}else console.log("productsDB está vacío o no está definido")});n(this,"handleKeyUp",t=>{this.state.howMany&&t.key==="Enter"&&this.addBtnRef.current.click()});n(this,"loadCartItems",async t=>{try{const a=await A(j(p,"carts",t));a.exists()&&this.setState({cartItems:a.data().items||[]})}catch(a){console.error("Error loading cart items:",a)}});n(this,"totalPrice",async(t,a)=>{try{Array.isArray(a)&&a.length>0?(await N(j(p,"carts",t),{items:a}),console.log("Cart items saved successfully:",a)):(await N(j(p,"carts",t),{items:[]}),console.warn("Cart is empty, saved empty cart items."))}catch(o){console.error("Error saving cart items:",o)}});n(this,"generatePurchaseId",t=>{const a=Date.now();return`${t}_purchase_${a}`});n(this,"savePurchase",async(t,a,o,r)=>{try{const l=this.generatePurchaseId(t),{location:d}=this.state,[u,h]=d.split(", "),c=j(p,"states",h),x=await A(c);if(x.exists()){const g=x.data();let C=null;for(const f in g)if(g[f].includes(u)){C=f;break}C?(await N(j(p,"purchases",l),{purchaseId:l,userId:t,items:a,timestamp:new Date().toISOString(),address:o,payerName:r,deliveryDate:"pendiente",returned:"no",canceled:"no",inReturnProcess:"no",inTheWay:"no",delivered:"no",returnCompleted:"yes",location:this.state.location,zone:`${h}, ${C}`}),this.setState({purchaseIdToDownloadTicket:l}),console.log("Compra guardada con éxito en la zona:",C)):console.log(`El municipio ${u} no se encuentra en ninguna zona de ${h}`)}else console.log(`No se encontraron zonas para el estado ${h}`)}catch(l){console.error("Error saving purchase:",l)}});n(this,"handleClick",t=>{const{cartItems:a,currentProduct:o}=this.state,r=P.currentUser;if(t.target.classList.contains("save")){this.setState({howMany:!0}),window.scrollTo({top:0,behavior:"smooth"});const l=t.target.parentNode;if(l){const d=l.querySelector(".product-name").textContent,u=l.querySelector(".product-img").getAttribute("src"),h=l.querySelector(".price");let c=0;h&&(c=parseFloat(h.textContent.replace(/\$/g,"").trim())),this.setState({currentProduct:{...this.state.currentProduct,name:d,image:u,price:c,totalPrice:c}})}}if(t.target.classList.contains("add")){const l=this.numberRef.current;if(l){const d=parseInt(l.value,10),u=a.find(h=>h.name===o.name);if(u){if(u.amount+d>20){this.setState({amountMessage:!0}),t.preventDefault();return}}else if(d>20){this.setState({amountMessage:!0}),t.preventDefault();return}if(d>=1&&d<=20)if(u){const h=a.map(c=>c.name===o.name?{...c,amount:c.amount+d,totalPrice:c.totalPrice+o.price*d}:c);this.setState({cartItems:h,howMany:!1,amountMessage:!1}),r&&this.saveCartItems(r.uid,h)}else{const h={amount:d,name:o.name,image:o.image,price:o.price,totalPrice:o.price*d},c=[...a,h];this.setState({cartItems:c,howMany:!1,amountMessage:!1}),r&&this.saveCartItems(r.uid,c)}else this.setState({amountMessage:!0}),t.preventDefault()}}t.target.classList.contains("purchase")&&(r?this.setState({getLocationPermission:!0,showPurchaseSummary:!0,products:!1},()=>{window.scrollTo({top:0,behavior:"smooth"}),this.loadMunicipalities()}):(this.setState({notUser:!0}),t.preventDefault()))});n(this,"handleAcceptCookies",()=>{ie(),this.setState({cookiesAccepted:!0})});n(this,"handleRightArrowClick",()=>{const t=this.rightArrowRef.current,a=this.mobileContentRef.current;t.classList.toggle("rotation"),a.classList.add("shaking2"),setTimeout(()=>{a.classList.toggle("shaking1"),setTimeout(()=>{a.classList.toggle("shaking2")},200),setTimeout(()=>{a.classList.toggle("visibility")},200)},200)});n(this,"handleAmount",t=>{const a=parseInt(t.target.value,10);a<1||a>20?this.setState({amountMessage:!0}):this.setState({amountMessage:!1})});n(this,"handleRemoveItem",t=>{const a=[...this.state.cartItems];a.splice(t,1),this.setState({cartItems:a})});n(this,"handleEmptyCart",()=>{this.setState({cartItems:[]})});n(this,"handleFinalizePurchase",async()=>{const{cartItems:t,addressSelected:a}=this.state,o=P.currentUser;if(!a){this.setState({nonAddressSelectedMessage:!0}),setTimeout(()=>{this.setState({nonAddressSelectedMessage:!1})},1500);return}if(o&&t.length>0){const l=E(D(p,"purchases"),L("userId","==",o.uid));if((await b(l)).size>=5){console.warn("Límite de compras alcanzado para el usuario:",o.uid),this.setState({limitOfPurchasesReached:!0});return}this.setState({blackBackground:!0,showPaypalPayMethod:!0,nonAddressSelectedMessage:!1,showPurchaseSummary:!1},()=>{window.scrollTo({top:0,behavior:"smooth"})})}});n(this,"calculateTotalPrice",()=>this.state.cartItems.reduce((t,a)=>t+a.totalPrice,0).toFixed(2));n(this,"handleFinalizePurchaseMessage",async()=>{const t=P.currentUser;t&&(await this.saveCartItems(t.uid,[]),this.setState({cartItems:[],finalizePurchaseMessage:!1}))});n(this,"loadPurchaseHistory",async t=>{try{const a=E(D(p,"purchases"),L("userId","==",t)),r=(await b(a)).docs.map(l=>({id:l.id,timestamp:l.data().timestamp,items:l.data().items}));this.setState({purchaseHistory:r})}catch(a){console.error("Error loading purchase history:",a)}});n(this,"handleShowPurchaseHistory",()=>{const t=P.currentUser;t?(this.loadPurchaseHistory(t.uid),this.setState({showPurchaseHistory:!0})):console.log("Usuario no autenticado")});n(this,"handleHidePurchaseHistory",()=>{this.setState({showPurchaseHistory:!1})});n(this,"handlePurchaseHistoryItemClick",async t=>{try{const o=(await A(j(p,"purchases",t))).data(),r=o.items||[],l=o.address||{},d=o.canceled||{};this.setState({purchaseDataToDownloadTicket:o,purchaseIdToDownloadTicket:t}),this.setState({selectedPurchaseItems:r,selectedPurchaseAddress:l,payerName:o.payerName,deliveryDate:o.deliveryDate,showPurchaseHistory:!1,purchaseCanceled:o.canceled,selectedPurchaseId:o.purchaseId,inTheWay:o.inTheWay,delivered:o.delivered,canceled:o.canceled})}catch(a){console.error("Error loading purchase items:",a)}});n(this,"handleChange",t=>{const{name:a,value:o}=t.target;this.setState(r=>({formData:{...r.formData,[a]:o}}))});n(this,"handleSubmit",async t=>{localStorage.getItem("open-add-direction",!0)&&localStorage.removeItem("open-add-direction"),t.preventDefault();const{userId:a,formData:o}=this.state,{street:r,colony:l,postalCode:d,additionalInfo:u}=o;if(!a||!r||!l||!d){console.error("Error: userId or addressData is undefined or empty.");return}const h={street:r,colony:l,postalCode:d,additionalInfo:u};try{await this.saveAddress(a,h),console.log("Formulario enviado:",h),window.location.href=""}catch(c){console.error("Error saving address:",c)}});n(this,"handleAddressesBtn",t=>{const{addressesShow:a}=this.state;if(a.length>=3){this.setState({cantAddMoreThanThreeAddressesMessage:!0}),setTimeout(()=>{this.setState({cantAddMoreThanThreeAddressesMessage:!1})},1500);return}this.setState({addAddress:!0,showPurchaseSummary:!1})});n(this,"saveAddress",async(t,a)=>{try{await N(j(p,"addresses",t),{addresses:de(a)},{merge:!0}),console.log("Address saved successfully:",a)}catch(o){throw console.error("Error saving address:",o),o}});n(this,"handleAddressClick",t=>{const{addressesShow:a}=this.state,o=a[t];this.setState({selectedAddress:o,addressSelected:!0})});n(this,"getImageAsBase64",(t,a)=>{const o=new Image;o.crossOrigin="Anonymous",o.onload=()=>{const r=document.createElement("canvas"),l=r.getContext("2d");r.width=o.width,r.height=o.height,l.drawImage(o,0,0);const d=r.toDataURL("image/png");a(d)},o.src=t});n(this,"generatePDFTicket",async t=>{try{const a=await b(D(p,"purchases"));let o=null;if(a.forEach(r=>{r.id===t&&(o=r.data())}),o){const r=new B;this.getImageAsBase64("../../../src/assets/shortcut.png",d=>{const u=49.374900000000004;r.addImage(d,"PNG",10,10,u,u),r.text("Ticket de Compra",10,70),r.text(`Nombre del Comprador: ${o.payerName}`,10,80),r.text(`Fecha: ${new Date(o.timestamp).toLocaleString()}`,10,90);let h=0,c=120;r.text("Detalles de los Productos:",10,c),c+=10,o.items.forEach((f,w)=>{r.text(`Producto ${w+1}: ${f.name}`,10,c),c+=10,r.text(`Cantidad: ${f.amount}`,10,c),c+=10,r.text(`Precio Unitario: $${f.price}`,10,c),c+=10,r.text(`Total: $${f.totalPrice}`,10,c),c+=15,h+=f.totalPrice});const g=h*.16,C=h+g;r.text(`Total: $${h.toFixed(2)}`,10,c),c+=10,r.text(`IVA Incluido: $${g.toFixed(2)}`,10,c),c+=10,r.text(`Total con IVA: $${C.toFixed(2)}`,10,c),r.save("ticket-de-compra.pdf")})}else console.log("Compra no encontrada")}catch(a){console.error("Error al obtener los detalles de la compra:",a)}});n(this,"wantToDownloadTicketFunction",()=>{this.generatePDFTicket(this.state.purchaseIdToDownloadTicket),this.setState({wantToDownloadTicket:!1})});n(this,"dontWantToDownloadTicketFunction",()=>{this.setState({wantToDownloadTicket:!1})});n(this,"donwloadTicket",()=>{const t=this.state.purchaseDataToDownloadTicket,a=new B;this.getImageAsBase64("../../../src/assets/shortcut.png",r=>{const l=49.374900000000004;a.addImage(r,"PNG",10,10,l,l),a.text("Ticket de Compra",10,70),a.text(`Nombre del Comprador: ${t.payerName}`,10,80),a.text(`Fecha y Hora: ${new Date(t.timestamp).toLocaleString()}`,10,90),a.text(`Dirección de Entrega: ${t.address.street}, ${t.address.colony}, ${t.address.postalCode}`,10,100);let d=0;a.text("Detalles de los Productos:",10,120),t.items.forEach((x,g)=>{a.text(`Producto ${g+1}: ${x.name}`,10,130+g*10),a.text(`Cantidad: ${x.amount}`,10,140+g*10),a.text(`Precio Unitario: $${x.price}`,10,150+g*10),a.text(`Total: $${x.totalPrice}`,10,160+g*10),d+=x.totalPrice});const h=d*0,c=d+h;a.text(`Total: $${d.toFixed(2)}`,10,170+t.items.length*10),a.text(`IVA Incluido 0.00: $${h.toFixed(2)}`,10,180+t.items.length*10),a.text(`Total con IVA: $${c.toFixed(2)}`,10,190+t.items.length*10),a.save("ticket-de-compra.pdf")})});n(this,"formatDate",t=>{const a=new Date(t);a.setDate(a.getDate()+1);const o={day:"numeric",month:"long",year:"numeric"};if(a!="Invalid Date")return a.toLocaleDateString("es-ES",o)});n(this,"handleCloseAddAddressForm",()=>{localStorage.setItem("open-add-direction",!1),this.setState({addAddress:!1})});n(this,"saveCartItems",async(t,a)=>{try{const o=j(p,"carts",t);await N(o,{items:a}),console.log("Cart items saved successfully")}catch(o){console.error("Error saving cart items:",o)}});n(this,"uploadOnlineStatus",()=>{this.setState({offlineMessage:!navigator.onLine})});n(this,"handleCancelPurchaseBtnClick",()=>{this.setState({cancelPurchaseWarning:!0})});n(this,"handleCancelPurchase",()=>{try{const{selectedPurchaseId:t}=this.state;if(!t){console.error("No se ha seleccionado ninguna compra para cancelar.");return}const a=j(p,"purchases",t);N(a,{canceled:"yes"},{merge:!0}).then(()=>{console.log("Compra cancelada exitosamente"),this.setState({canceledPurchaseDoneMessage:!0}),window.location.href=""}).catch(o=>{console.error("Error al cancelar la compra:",o)})}catch(t){console.error("Error en la operación de cancelación:",t)}});n(this,"handleProductClick",t=>{console.log("Producto seleccionado:",t)});n(this,"handleRequestLocation",()=>{this.setState({showLocationRequest:!0})});n(this,"updateLocation",async()=>{try{const t=await F();t?this.setState({location:t}):this.setState({error:"No se pudo obtener la ubicación."})}catch{this.setState({error:"Hubo un problema al obtener la ubicación."})}});n(this,"handleCancelGetLocation",()=>{this.setState({showLocationRequest:!1,getLocationPermission:!1,showPurchaseSummary:!1,location:null})});n(this,"handleBackToCartBtnClick",()=>{this.setState({showPurchaseSummary:!1,getLocationPermission:!1})});n(this,"handleChangeZoneBtnClick",()=>{this.setState({selectZoneForm:!0})});n(this,"handleStateChange",t=>{const a=t.target.value;this.setState({selectedState:a},this.loadMunicipalities),this.setState({selectedState:a})});n(this,"handleMunicipalityChange",t=>{this.setState({selectedMunicipality:t.target.value})});n(this,"loadMunicipalities",()=>{const{selectedState:t}=this.state,a=O[t]||[];this.setState({municipalities:a})});n(this,"handleSelectZoneAcceptBtnClick",(t,a)=>{(!this.state.selectedState||!this.state.selectedMunicipality)&&(alert("Seleccione los parámetros correspondientes"),e.preventDefault()),this.setState({selectZoneForm:!1,location:`${a}, ${t}`})});n(this,"handleZoneIsOk",()=>{this.setState({getLocationPermission:!1,okBtn:!0})});this.state={cookiesAccepted:ne(),content:!0,cartDiv:!0,amountMessage:!1,products:!1,cartItems:[],notUser:!1,showPurchaseSummary:!1,finalizePurchaseMessage:!1,showPurchaseHistory:!1,purchaseHistory:[],selectedPurchaseItems:[],showPaypalPayMethod:!1,blackBackground:!1,addresses:!0,addAddress:!1,formData:{street:"",colony:"",postalCode:"",additionalInfo:""},userId:null,addressesShow:[],addressSelected:null,nonAddressSelectedMessage:!1,cantAddMoreThanThreeAddressesMessage:!1,wantToDownloadTicket:!1,purchaseDetails:{buyerName:null,date:null,items:[]},purchaseDataToDownloadTicket:null,purchaseIdToDownloadTicket:null,limitOfPurchasesReached:!1,deliveryDate:null,offlineMessage:!navigator.onLine,purchaseCanceled:"",selectedPurchaseId:"",cancelPurchaseWarning:!1,canceledPurchaseDoneMessage:!1,inTheWay:null,delivered:null,productsDB:[],currentProduct:{name:"",imageProductUrl:"",price:0,totalPrice:0,description:"",category:"",stock:0,rating:0,createdAt:null},howMany:!1,showLocationRequest:!1,location:null,error:null,okBtn:!1,municipalities:[],states:{},selectedState:null,selectedMunicipality:null},this.rightArrowRef=S.createRef(),this.mobileContentRef=S.createRef(),this.numberRef=S.createRef(),this.addBtnRef=S.createRef(),this.carRef=S.createRef(),this.addAddressBtn=S.createRef()}async fetchProducts(){try{const t=[];(await b(D(p,"products"))).forEach(o=>{const r=o.data();t.push({id:o.id,...r,price:parseFloat(r.price)})}),this.setState({productsDB:t},()=>{console.log("Productos cargados correctamente"),this.verifyProductToBuy()})}catch(t){console.error("Error fetching products:",t)}}componentDidMount(){F(),this.fetchProducts(),oe().then(t=>{if(t!="Argentina"){let a=document.body;a.innerHTML="",a.innerHTML="Página no disponible"}}),window.addEventListener("online",this.uploadOnlineStatus),window.addEventListener("offline",this.uploadOnlineStatus),localStorage.getItem("open-add-direction")=="true"&&this.setState({addAddress:!0}),window.addEventListener("keyup",this.handleKeyUp),le(P,t=>{t&&(this.setState({userId:t.uid}),this.loadCartItems(t.uid),this.loadPurchaseHistory(t.uid),this.fetchAddresses())}),window.addEventListener("click",this.handleClick)}componentWillUnmount(){window.removeEventListener("click",this.handleClick),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("online",this.uploadOnlineStatus),window.removeEventListener("offline",this.uploadOnlineStatus)}async fetchAddresses(){const t=P.currentUser;try{if(!t){console.log("No user logged in."),this.setState({addressesShow:[]});return}const a=j(p,"addresses",t.uid),o=await A(a);if(o.exists()){const l=o.data().addresses||[];this.setState({addressesShow:l})}else console.log("No such document!"),this.setState({addressesShow:[]})}catch(a){console.error("Error fetching addresses:",a)}}render(){const{cookiesAccepted:t,content:a,cartDiv:o,howMany:r,amountMessage:l,products:d,cartItems:u,currentProduct:h,showPurchaseSummary:c,finalizePurchaseMessage:x,showPurchaseHistory:g,purchaseHistory:C,selectedPurchaseItems:f,selectedPurchaseAddress:w,blackBackground:U,showPaypalPayMethod:z,addresses:H,addAddress:q,addressesShow:M,selectedAddress:v,nonAddressSelectedMessage:W,cantAddMoreThanThreeAddressesMessage:V,wantToDownloadTicket:Z,limitOfPurchasesReached:G,offlineMessage:K,notUser:Q,addAddressBtn:xe,purchaseCanceled:fe,cancelPurchaseWarning:_,canceledPurchaseDoneMessage:Y,inTheWay:je,delivered:Ce,productsDB:X,getLocationPermission:J,okBtn:ee,selectZoneForm:se}=this.state;return s.jsxs(s.Fragment,{children:[K&&s.jsx("div",{className:"offline-message",children:s.jsx("p",{children:"Sin conexión a internet"})}),z&&s.jsxs("div",{className:"paypal",children:[s.jsx("h2",{children:"Métodos de pago"}),s.jsxs("p",{children:["Para Paypa utilizar",s.jsx("br",{}),s.jsx("b",{children:"Correo:"})," sb-vamh831570249@personal.example.com",s.jsx("br",{}),s.jsx("b",{children:"Contraseña:"})," ",pe]}),s.jsx(ue,{options:{"client-id":"AaTug9TGCYeDVyWWgd01n3wz9hye_tMg-jasbpZouXYXdjtCMYImI0bKUQIBsCK22gjDdbcH6fwCszac",currency:"MXN"},children:s.jsx(me,{style:{layout:"vertical",color:"blue",shape:"pill",label:"checkout",height:40},createOrder:(i,m)=>m.order.create({purchase_units:[{amount:{value:this.calculateTotalPrice()}}]}),onApprove:(i,m)=>m.order.capture().then(R=>{const I=this.state.cartItems,T=P.currentUser;T&&I.length>0&&(this.savePurchase(T.uid,I,v,R.payer.name.given_name),this.setState({showPurchaseSummary:!1}),this.saveCartItems(T.uid,[]),this.setState({showPaypalPayMethod:!1,blackBackground:!1}),this.setState({finalizePurchaseMessage:!0}),this.setState({purchaseDetails:{buyerName:R.payer.name.given_name,date:new Date().toLocaleDateString(),items:I.map($=>({name:$.name,price:$.price}))}}),this.setState({wantToDownloadTicket:!0}))})})}),s.jsx("button",{className:"cancel-purchase",onClick:()=>this.setState({showPaypalPayMethod:!1,blackBackground:!1}),children:"Cancelar"})]}),s.jsxs("section",{className:"top",children:[s.jsx("i",{className:"fa-solid fa-chevron-right",ref:this.rightArrowRef,onClick:this.handleRightArrowClick}),s.jsxs("div",{className:"mobile-content",ref:this.mobileContentRef,children:[s.jsx("a",{href:"../",children:"INICIO"}),s.jsx("a",{href:"../about-us/index.html",children:"ACERCA DE"}),s.jsx("a",{href:"../contact-us/index.html",children:"CONTACTO"})]}),s.jsx("a",{href:"../index.html",className:"a-brand",children:s.jsx("img",{src:"../../../src/assets/brand.png",className:"brand",alt:"Brand"})}),s.jsxs("div",{className:"top-sections",children:[s.jsx("button",{className:"home-btn",onClick:()=>window.location.href="../",children:"INICIO"}),s.jsx("button",{className:"about-us",onClick:()=>window.location.href="../about-us/index.html",children:"ACERCA DE"}),s.jsx("button",{className:"contact-us",onClick:()=>window.location.href="../contact-us/index.html",children:"CONTACTO"}),o&&s.jsxs("div",{className:"cart-div",onMouseLeave:()=>this.setState({products:!1}),children:[s.jsx("i",{className:"fa-solid fa-cart-shopping cart-icon",ref:this.carRef,onMouseOver:()=>this.setState({products:!0}),onClick:()=>this.setState({products:!0})}),d&&u.length>0&&s.jsxs("div",{className:"products",children:[s.jsx("ul",{className:"products-ul",children:u.map((i,m)=>s.jsxs("li",{children:[s.jsx("img",{src:i.image,alt:i.name,style:{width:"50px"}}),i.name," - Cantidad: ",i.amount," - Precio: $",i.totalPrice.toFixed(2),s.jsx("button",{onClick:()=>this.handleRemoveItem(m),children:"Eliminar"})]},m))}),s.jsx("div",{children:s.jsx("p",{children:s.jsxs("strong",{className:"total-price",children:["Precio Total: $",this.calculateTotalPrice()]})})}),s.jsx("button",{onClick:this.handleEmptyCart,children:"Vaciar Carrito"}),s.jsx("button",{className:"purchase",children:"Finalizar Compra"})]})]})]})]}),a&&s.jsxs("section",{className:"content",children:[X.map(i=>s.jsxs("div",{className:"product-item shampoo","data-id":i.id,onClick:()=>this.handleProductClick(i),children:[s.jsx("i",{className:"fa-regular fa-floppy-disk save"}),s.jsx("p",{className:"added-p",children:"Agregado"}),s.jsx("h3",{className:"product-name",children:i.name}),s.jsx("img",{src:i.imageUrl,className:"product-img",alt:i.name}),s.jsxs("button",{className:"price",children:["$",isNaN(i.price)?"N/A":i.price.toFixed(2)," ",s.jsx("i",{className:"fa-solid fa-tag"})]})]},i.id)),r&&s.jsxs("div",{className:"how-many",children:[s.jsx("i",{className:"fa-solid fa-xmark close",onClick:()=>this.setState({howMany:!1})}),"Cantidad: ",s.jsx("br",{}),s.jsx("input",{type:"number",className:"amount",ref:this.numberRef,defaultValue:1,onChange:this.handleAmount}),s.jsx("br",{}),s.jsx("button",{className:"add",ref:this.addBtnRef,onClick:this.handleClick,children:"Agregar"}),l&&s.jsx("p",{className:"amount-message",children:"Puede comprar entre 1 y 20 productos"})]})]}),!t&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"cookies-advice activo",id:"cookies-advice",children:[s.jsx("img",{className:"cookie",src:"../../src/assets/cookie.svg",alt:"Cookie"}),s.jsx("h3",{className:"tittle",children:"Cookies"}),s.jsx("p",{className:"paragraph",children:"Utilizamos cookies propias y de terceros para mejorar nuestros servicios."}),s.jsx("button",{className:"button",id:"accept-cookies-btn",onClick:this.handleAcceptCookies,children:"De acuerdo"}),s.jsx("a",{className:"link",href:"../abendet-cookies/index.html",children:"Aviso de Cookies"})]}),s.jsx("div",{className:"back-cookies-advice activo",id:"back-cookies-advice"})]}),c&&s.jsxs("div",{className:"purchase-summary",children:[s.jsx("h2",{children:"Resumen de Compra"}),s.jsx("ul",{children:u.map((i,m)=>s.jsx("li",{children:s.jsx("div",{children:s.jsxs("p",{children:[i.name," x",i.amount," = $",i.totalPrice.toFixed(2)]})})},m))}),s.jsx("p",{children:s.jsxs("strong",{children:["Precio Total: $",this.calculateTotalPrice()]})}),s.jsxs("div",{children:[s.jsx("h2",{children:"Lista de Direcciones"}),M.length===0?s.jsxs("p",{children:["No hay direcciones disponibles  ",s.jsx("a",{className:"link2",onClick:()=>this.addAddressBtn.current.click(),children:"añada una"})]}):s.jsx("ul",{className:"addresses-ul",children:M.map((i,m)=>s.jsxs("li",{onClick:()=>this.handleAddressClick(m),className:v===i?"selected":"",style:{position:"relative"},children:[v===i&&s.jsx("i",{className:"fa-solid fa-check"}),s.jsxs("p",{children:["Calle: ",i.street]}),s.jsxs("p",{children:["Colonia: ",i.colony]}),s.jsxs("p",{children:["Código Postal: ",i.postalCode]}),s.jsxs("p",{children:["Información adicional: ",i.additionalInfo]})]},m))}),v&&s.jsxs("div",{className:"selected-address",children:[s.jsx("h3",{children:"Dirección seleccionada:"}),s.jsxs("p",{children:["Calle: ",v.street]}),s.jsxs("p",{children:["Colonia: ",v.colony]}),s.jsxs("p",{children:["Código Postal: ",v.postalCode]}),s.jsxs("p",{children:["Información adicional: ",v.additionalInfo]})]})]}),H&&s.jsx("button",{onClick:this.handleAddressesBtn,className:"add-address-btn",ref:this.addAddressBtn,children:"Añadir dirección"}),W&&s.jsx("p",{className:"non-address-selected-message error-messages",children:"Seleccione una dirección antes de continuar"}),V&&s.jsx("p",{className:"error-messages",children:"No puede añadir más de 3 direcciones"}),s.jsx("button",{className:"back-to-cart",onClick:this.handleBackToCartBtnClick,children:"Volver al Carrito"}),ee&&s.jsx(s.Fragment,{children:s.jsx("button",{className:"ok",onClick:this.handleFinalizePurchase,children:"Finalizar"})})]}),x&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"finalizepurchasemessagediv",children:[s.jsxs("p",{className:"finalizepurchasemessagep",children:["Gracias por tu compra!, puedes ver la fecha de entrega en la sección de",s.jsxs("a",{onClick:()=>this.setState({showPurchaseHistory:!0,finalizePurchaseMessage:!1}),children:[" compras",s.jsx("i",{className:"fa-solid fa-up-right-from-square"})]}),s.jsx("br",{}),s.jsx("br",{})," ",s.jsx("i",{className:"fa-solid fa-heart"})]}),s.jsx("button",{className:"ok",onClick:this.handleFinalizePurchaseMessage,children:"Listo"})]})}),s.jsx("button",{className:"purchase-history",onClick:this.handleShowPurchaseHistory,children:"Compras"}),g&&s.jsxs("div",{className:"purchase-history2",children:[s.jsx("h2",{children:"Historial de Compras"}),s.jsxs("ul",{children:[C.map((i,m)=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>this.handlePurchaseHistoryItemClick(i.id),children:["Compra del ",new Date(i.timestamp).toLocaleString()]})},m)),C.length<1&&s.jsx("p",{className:"no-purchases",children:"No hay compras"})]}),s.jsx("button",{onClick:this.handleHidePurchaseHistory,className:"history-close-btn",children:"Cerrar"})]}),f.length>0&&s.jsxs("div",{className:"selected-purchase",children:[s.jsx("h2",{children:"Detalles de la Compra Seleccionada"}),"Comprador: ",this.state.payerName,s.jsx("ul",{children:f.map((i,m)=>s.jsx("li",{children:s.jsx("div",{children:s.jsxs("p",{children:[i.name," x",i.amount," = $",i.totalPrice.toFixed(2)]})})},m))}),s.jsxs("div",{className:"selected-purchase-address",children:[s.jsx("h3",{children:"Dirección de Envío:"}),s.jsxs("p",{children:["Calle: ",w.street]}),s.jsxs("p",{children:["Colonia: ",w.colony]}),s.jsxs("p",{children:["Código Postal: ",w.postalCode]}),s.jsxs("p",{children:["Información adicional: ",w.additionalInfo]})]}),s.jsx("p",{className:"delivery-date",children:this.state.canceled!=="yes"&&s.jsxs(s.Fragment,{children:["Fecha de entrega:"," ",s.jsx("a",{children:this.state.deliveryDate==="pendiente"?"Pendiente":`del ${this.formatDate(this.state.deliveryDate.split(" al ")[0])} al ${this.formatDate(this.state.deliveryDate.split(" al ")[1])}`})]})}),s.jsx("p",{children:this.state.inTheWay==="yes"&&this.state.canceled==="no"&&this.state.delivered!="no"?"En camino":""}),s.jsx("div",{children:this.state.purchaseCanceled==="no"&&this.state.inTheWay==="no"&&this.state.delivered==="no"&&s.jsxs("div",{children:[s.jsxs("a",{className:"generate-ticket",onClick:this.donwloadTicket,children:["Generar ticket ",s.jsx("i",{className:"fa-solid fa-ticket"})]}),s.jsx("button",{className:"cancel-purchase-btn",onClick:this.handleCancelPurchaseBtnClick,children:"CANCELAR COMPRA"})]})}),s.jsx("div",{children:this.state.purchaseCanceled==="yes"&&s.jsx("p",{className:"canceled-purchase",children:"COMPRA CANCELADA"})}),s.jsx("div",{children:this.state.delivered==="yes"&&this.state.inTheWay=="no"&&s.jsx("p",{className:"purchase-delivered",children:"ENTREGADO"})}),s.jsx("button",{onClick:()=>this.setState({selectedPurchaseItems:[]}),className:"close-details",children:"Cerrar Detalles"})]}),U&&s.jsx("div",{className:"black-background"}),q&&s.jsxs("form",{onSubmit:this.handleSubmit,className:"addAddress-form",children:[s.jsx("i",{className:"fa-solid fa-xmark close",onClick:this.handleCloseAddAddressForm}),s.jsx("h2",{children:"Añadir dirección"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"street",children:"Calle:"}),s.jsx("input",{type:"text",id:"street",name:"street",value:this.state.formData.street,onChange:this.handleChange,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"colony",children:"Colonia:"}),s.jsx("input",{type:"text",id:"colony",name:"colony",value:this.state.formData.colony,onChange:this.handleChange,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"postalCode",children:"Código Postal:"}),s.jsx("input",{type:"text",id:"postalCode",name:"postalCode",value:this.state.formData.postalCode,onChange:this.handleChange,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"additionalInfo",children:"Descripción Adicional:"}),s.jsx("textarea",{id:"additionalInfo",name:"additionalInfo",value:this.state.formData.additionalInfo,onChange:this.handleChange,maxLength:100})]}),s.jsx("button",{type:"submit",children:"Enviar"})]}),Z&&s.jsxs("div",{className:"want-to-donwload-ticket",children:[s.jsx("p",{children:"¿Quieres descargar tu ticket de compra?"}),s.jsx("button",{onClick:this.wantToDownloadTicketFunction,className:"positive-btn",children:"Sí"}),s.jsx("button",{onClick:this.dontWantToDownloadTicketFunction,className:"negative-btn",children:"No"})]}),G&&s.jsxs("div",{className:"limit-of-purchases-reached",children:[s.jsx("p",{children:"Haz alcanzado el límite de compras"}),s.jsx("p",{children:"Límite por cuenta: 5"}),s.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),s.jsx("button",{className:"positive-btn",onClick:()=>this.setState({limitOfPurchasesReached:!1}),children:"OK"})]}),Q&&s.jsxs("div",{className:"not-user",children:[s.jsx("p",{children:"Inicia sesión para poder añadir productos al carrito"}),s.jsx("button",{onClick:()=>window.location.href="../../",children:"Iniciar Sesión"})]}),_&&s.jsxs("div",{className:"cancel-purchase-warning",children:[s.jsx("p",{children:"¿Estás seguro de cancelar esta compra?"}),s.jsx("button",{onClick:this.handleCancelPurchase,children:"ESTOY SEGURO"}),s.jsx("button",{onClick:()=>this.setState({cancelPurchaseWarning:!1}),children:"NO"})]}),Y&&s.jsx("div",{className:"cancel-purchase-done",children:s.jsx("p",{children:"Compra cancelada"})}),J&&s.jsxs("div",{className:"location-request-container",children:[s.jsx("h2",{children:"Proceso de compra"}),s.jsx("button",{onClick:this.handleRequestLocation,children:"Necesitamos tu ubicación para completar el envío"}),this.state.showLocationRequest&&s.jsxs("div",{className:"location-request",children:[s.jsx("p",{children:"¿Permites que accedamos a tu ubicación para enviar el producto?"}),s.jsx("button",{onClick:this.updateLocation,children:"Sí, permitir ubicación"}),s.jsx("button",{onClick:this.handleCancelGetLocation,children:"Cancelar"})]}),this.state.location&&s.jsxs("div",{className:"location-info",children:[s.jsxs("p",{children:["Tu ubicación es: ",this.state.location]}),s.jsx("button",{onClick:this.handleZoneIsOk,children:"OK"}),s.jsx("button",{onClick:this.handleChangeZoneBtnClick,children:"Cambiar"})]}),this.state.error&&s.jsx("p",{className:"error-message",children:this.state.error})]}),se&&s.jsxs("div",{className:"select-zone-form",children:[s.jsx("h2",{children:"Seleccione su estado"}),s.jsxs("select",{value:this.state.selectedState,onChange:this.handleStateChange,children:[s.jsx("option",{value:"",children:"Selecciona un estado"}),Object.keys(O).map(i=>s.jsx("option",{value:i,children:i},i))]}),s.jsx("h2",{children:"Seleccione su municipio"}),s.jsxs("select",{onChange:this.handleMunicipalityChange,children:[s.jsx("option",{value:"",children:"Selecciona un municipio"}),this.state.municipalities.map(i=>s.jsx("option",{value:i,children:i},i))]}),s.jsx("button",{onClick:()=>this.handleSelectZoneAcceptBtnClick(this.state.selectedState,this.state.selectedMunicipality),children:"Aceptar"})]}),s.jsxs("footer",{className:"footer",children:[s.jsxs("div",{className:"footer-div1",children:[s.jsx("a",{href:"../",children:"Inicio"}),s.jsx("a",{href:"../about-us/index.html",children:"Acerca De"}),s.jsx("a",{href:"../contact-us/index.html",children:"Contacto"})]}),s.jsxs("div",{className:"footer-div2",children:[s.jsx("a",{href:"../sponsorships/index.html",children:"Patrocinios"}),s.jsx("a",{href:"../abendet-cookies/index.html",children:"Cookies"}),s.jsx("a",{href:"../abendet-privacy/index.html",children:"Privacidad"})]})]})]})}}re.createRoot(document.getElementById("root")).render(s.jsx(S.StrictMode,{children:s.jsx(ge,{})}));
