import{r as t,j as e,g as G,c as K,R as W}from"./country-D3IyiI93.js";/* empty css                  *//* empty css                       *//* empty css              *//* empty css                */import{g as I}from"./index-454a0f5f-BXqj5mO1.js";import{a as P,d as J,e as Q,g as X,u as Y}from"./firebase-CbjSvAAB.js";import{c as Z,a as ee}from"./cookies-DJwG0iie.js";import{l as se,g as te,a as ae,b as oe,c as ne}from"./getInfo-CDAeI_NB.js";const ce=({howMany:x,setHowMany:l})=>{const[N,b]=t.useState(!0),C=t.useRef(null),R=t.useRef(null),j=t.useRef(null),k=t.useRef(null);let[S,w]=t.useState(Z());t.useEffect(()=>{G().then(d=>{if(d!="Argentina"){let n=document.body;n.innerHTML="",n.innerHTML="Página no disponible"}});const c=I(P).onAuthStateChanged(d=>{b(!d)}),g=d=>{if(d.key==="Enter"){const n=document.querySelector(".search-icon");n==null||n.click()}};return window.addEventListener("keypress",g),()=>{c(),window.removeEventListener("keypress",g)}},[]);const m=o=>{window.location.href=o},f=()=>{const o=document.querySelector(".search");o==null||o.classList.toggle("search-appear")};function y(){const o=j.current,c=k.current;o.classList.toggle("rotation"),c.classList.add("shaking2"),setTimeout(()=>{c.classList.toggle("shaking1"),setTimeout(()=>{c.classList.toggle("shaking2")},200),setTimeout(()=>{c.classList.toggle("visibility")},200)},200)}function A(){ee(),w=!0,window.location.href=""}return e.jsxs("section",{className:"top",children:[e.jsx("i",{className:"fa-solid fa-chevron-right",onClick:y,ref:j}),e.jsxs("div",{className:"mobile-content",ref:k,children:[e.jsx("a",{href:"../products/index.html",children:"PRODUCTOS"}),e.jsx("a",{href:"../about-us/index.html",children:"ACERCA DE"}),e.jsx("a",{href:"../contact-us/index.html",children:"CONTACTO"})]}),e.jsx("a",{href:"../",children:e.jsx("img",{src:"../../src/assets/brand.png",className:"brand",alt:"brand"})}),e.jsxs("div",{className:"top-sections",children:[e.jsx("button",{onClick:()=>m("../products/index.html"),className:"products btns",children:"PRODUCTOS"}),e.jsx("button",{onClick:()=>m("../about-us/index.html"),className:"about-us btns",children:"ACERCA DE"}),e.jsx("button",{onClick:()=>m("../contact-us/index.html"),className:"contact-us btns",children:"CONTACTO"})]}),e.jsxs("div",{className:"look-up",children:[N?e.jsx("button",{className:"log-btn",onClick:()=>m("../../"),children:"Iniciar Sesión"}):e.jsx(e.Fragment,{}),x&&e.jsxs("div",{className:"how-many",children:[e.jsx("i",{className:"fa-solid fa-xmark close",onClick:()=>l(!1)}),"Cantidad: ",e.jsx("br",{}),e.jsx("input",{type:"number",className:"amount",ref:C,defaultValue:1}),e.jsx("br",{}),e.jsx("button",{className:"add",ref:R,children:"Agregar"})]}),e.jsx("div",{className:"search-div",children:e.jsx("i",{className:"fa-solid fa-magnifying-glass top-search",onClick:f})})]}),!S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cookies-advice activo",id:"cookies-advice",children:[e.jsx("img",{className:"cookie",src:"../../src/assets/cookie.svg",alt:"Cookie"}),e.jsx("h3",{className:"tittle",children:"Cookies"}),e.jsx("p",{className:"paragraph",children:"Utilizamos cookies propias y de terceros para mejorar nuestros servicios."}),e.jsx("button",{className:"button",id:"accept-cookies-btn",onClick:A,children:"De acuerdo"}),e.jsx("a",{className:"link",href:"abendet-cookies/index.html",children:"Aviso de Cookies"})]}),e.jsx("div",{className:"back-cookies-advice activo",id:"back-cookies-advice"})]}),e.jsxs("footer",{className:"footer",children:[e.jsxs("div",{className:"footer-div1",children:[e.jsx("a",{href:"../products/index.html",children:"Productos"}),e.jsx("a",{href:"../about-us/index.html",children:"Acerca De"}),e.jsx("a",{href:"../contact-us/index.html",children:"Contacto"})]}),e.jsxs("div",{className:"footer-div2",children:[e.jsx("a",{href:"../sponsorships/index.html",children:"Patrocinios"}),e.jsx("a",{href:"../abendet-cookies/index.html",children:"Cookies"}),e.jsx("a",{href:"../abendet-privacy/index.html",children:"Privacidad"})]})]})]})},ie=({setHowMany:x})=>{const l=t.useRef(null),[N,b]=t.useState(!1),C=I(P),[R,j]=t.useState(""),[k,S]=t.useState(""),[w,m]=t.useState(""),[f,y]=t.useState(""),[A,o]=t.useState(!1),[c,g]=t.useState(!1),[d,n]=t.useState(0),[L,le]=t.useState(0),[E,T]=t.useState(null);t.useEffect(()=>{const s="1";(async()=>{const h=await te(s),r=await ae(s),p=await oe(s),v=await ne(s);j(h),S(r),m(p),y(v)})();const a=I(P).onAuthStateChanged(async h=>{if(h){T(h.uid);const r=await se(h.uid,f);o(r)}});return()=>a()},[f]);const M=()=>{const s=l.current;s.value!==""?(localStorage.setItem("input-value",s.value),window.location.href="../search/index.html"):s.placeholder="Introduzca una búsqueda válida"},U=()=>{C.currentUser==null?(b(!0),window.scrollTo({top:0,behavior:"smooth"})):(localStorage.setItem("productName",f),window.location.href="../products/index.html")},O=()=>{window.location.href="../../../"},H=s=>{n(s)},$=()=>{n(0)},F=async s=>{const u=E,i=J(Q,"products","0");try{const a=await X(i);if(a.exists()){const r=a.data().rating||"",v=(r?r.split(", "):[]).filter(_=>!_.startsWith(`${E}:`));v.push(`${u}: ${s}`);const D=v.join(", ");await Y(i,{rating:D}),console.log("Calificación actualizada:",D),g(!1)}else console.log("El producto no existe.")}catch(a){console.error("Error al actualizar la calificación:",a)}},q=s=>{if(!s||s.length===0)return 0;const u=s.split(", "),i=u.length;let a=0;return u.forEach(r=>{const p=parseFloat(r.split(": ")[1]);isNaN(p)||(a+=p)}),(a/i).toFixed(2)},z=s=>{const u=Math.round(s),i=[];for(let a=1;a<=5;a++)i.push(e.jsx("i",{className:`fa-star average-stars ${a<=u?"fa-solid":"fa-regular"}`},a));return i},B=q(k),V=z(B);return e.jsxs("div",{children:[e.jsxs("section",{className:"search",children:[e.jsx("h1",{children:"Estamos contentos de ayudarte"}),e.jsx("input",{className:"search-input",ref:l}),e.jsx("i",{className:"fa-solid fa-magnifying-glass search-icon",onClick:M})]}),e.jsx("h2",{children:f}),e.jsxs("div",{className:"content",children:[e.jsxs("p",{className:"rating",children:["Calificación: ",V]}),A&&e.jsx("button",{className:"rate-product-btn",onClick:()=>g(!0),children:"Calificar Producto"}),c&&e.jsxs("div",{className:"rate-product-div",children:[e.jsx("i",{className:"fa-solid fa-xmark close-rating-div",onClick:()=>g(!1)}),[1,2,3,4,5].map(s=>e.jsx("i",{className:`fa-star rate-stars ${s<=(d||L)?"fa-solid":"fa-regular"}`,onMouseEnter:()=>H(s),onMouseLeave:$,onClick:()=>F(s)},s))]}),e.jsx("img",{src:w,alt:"Shampoo"}),e.jsxs("p",{children:[e.jsx("span",{dangerouslySetInnerHTML:{__html:R}}),e.jsxs("button",{onClick:U,children:["Comprar Producto ",e.jsx("i",{className:"fa-solid fa-up-right-from-square"})]})]}),N&&e.jsxs("div",{className:"not-user",children:[e.jsx("p",{children:"Inicia sesión para poder añadir productos al carrito"}),e.jsx("button",{onClick:O,children:"Iniciar Sesión"})]})]})]})},re=()=>{const[x,l]=t.useState(!1);return e.jsxs("div",{children:[e.jsx(ce,{howMany:x,setHowMany:l}),e.jsx(ie,{setHowMany:l})]})};K.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(re,{})}));
